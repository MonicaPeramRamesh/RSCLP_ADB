trigger:
- main

pool:
  name: Default   # Self-hosted agent pool

stages:
- stage: Build
  displayName: "Build Stage"
  jobs:
  - job: BuildJob
    displayName: "Build DLT Artifact"
    pool:
      name: Default
      demands:
        - agent.name -equals RSMAS-Agent

    steps:
    # 1️⃣ Verify Python (uses agent-installed Python)
    - script: |
        python --version
        pip --version
      displayName: "Verify Python on Agent"

    # 2️⃣ Install dependencies
    - script: |
        pip install -r requirements.txt
        echo "✅ Dependencies installed"
      displayName: "Install dependencies"

    # 3️⃣ Publish artifact
    - publish: .
      artifact: DLT_Artifact
      displayName: "Publish DLT Artifact"
